"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/valtio";
exports.ids = ["vendor-chunks/valtio"];
exports.modules = {

/***/ "(ssr)/./node_modules/valtio/esm/vanilla.mjs":
/*!*********************************************!*\
  !*** ./node_modules/valtio/esm/vanilla.mjs ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getVersion: () => (/* binding */ getVersion),\n/* harmony export */   proxy: () => (/* binding */ proxy),\n/* harmony export */   ref: () => (/* binding */ ref),\n/* harmony export */   snapshot: () => (/* binding */ snapshot),\n/* harmony export */   subscribe: () => (/* binding */ subscribe),\n/* harmony export */   unstable_buildProxyFunction: () => (/* binding */ unstable_buildProxyFunction)\n/* harmony export */ });\n/* harmony import */ var proxy_compare__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! proxy-compare */ \"(ssr)/./node_modules/proxy-compare/dist/index.modern.js\");\n\nconst isObject = (x)=>typeof x === \"object\" && x !== null;\nconst proxyStateMap = /* @__PURE__ */ new WeakMap();\nconst refSet = /* @__PURE__ */ new WeakSet();\nconst buildProxyFunction = (objectIs = Object.is, newProxy = (target, handler)=>new Proxy(target, handler), canProxy = (x)=>isObject(x) && !refSet.has(x) && (Array.isArray(x) || !(Symbol.iterator in x)) && !(x instanceof WeakMap) && !(x instanceof WeakSet) && !(x instanceof Error) && !(x instanceof Number) && !(x instanceof Date) && !(x instanceof String) && !(x instanceof RegExp) && !(x instanceof ArrayBuffer), defaultHandlePromise = (promise)=>{\n    switch(promise.status){\n        case \"fulfilled\":\n            return promise.value;\n        case \"rejected\":\n            throw promise.reason;\n        default:\n            throw promise;\n    }\n}, snapCache = /* @__PURE__ */ new WeakMap(), createSnapshot = (target, version, handlePromise = defaultHandlePromise)=>{\n    const cache = snapCache.get(target);\n    if ((cache == null ? void 0 : cache[0]) === version) {\n        return cache[1];\n    }\n    const snap = Array.isArray(target) ? [] : Object.create(Object.getPrototypeOf(target));\n    (0,proxy_compare__WEBPACK_IMPORTED_MODULE_0__.markToTrack)(snap, true);\n    snapCache.set(target, [\n        version,\n        snap\n    ]);\n    Reflect.ownKeys(target).forEach((key)=>{\n        if (Object.getOwnPropertyDescriptor(snap, key)) {\n            return;\n        }\n        const value = Reflect.get(target, key);\n        const { enumerable } = Reflect.getOwnPropertyDescriptor(target, key);\n        const desc = {\n            value,\n            enumerable,\n            // This is intentional to avoid copying with proxy-compare.\n            // It's still non-writable, so it avoids assigning a value.\n            configurable: true\n        };\n        if (refSet.has(value)) {\n            (0,proxy_compare__WEBPACK_IMPORTED_MODULE_0__.markToTrack)(value, false);\n        } else if (value instanceof Promise) {\n            delete desc.value;\n            desc.get = ()=>handlePromise(value);\n        } else if (proxyStateMap.has(value)) {\n            const [target2, ensureVersion] = proxyStateMap.get(value);\n            desc.value = createSnapshot(target2, ensureVersion(), handlePromise);\n        }\n        Object.defineProperty(snap, key, desc);\n    });\n    return Object.preventExtensions(snap);\n}, proxyCache = /* @__PURE__ */ new WeakMap(), versionHolder = [\n    1,\n    1\n], proxyFunction = (initialObject)=>{\n    if (!isObject(initialObject)) {\n        throw new Error(\"object required\");\n    }\n    const found = proxyCache.get(initialObject);\n    if (found) {\n        return found;\n    }\n    let version = versionHolder[0];\n    const listeners = /* @__PURE__ */ new Set();\n    const notifyUpdate = (op, nextVersion = ++versionHolder[0])=>{\n        if (version !== nextVersion) {\n            version = nextVersion;\n            listeners.forEach((listener)=>listener(op, nextVersion));\n        }\n    };\n    let checkVersion = versionHolder[1];\n    const ensureVersion = (nextCheckVersion = ++versionHolder[1])=>{\n        if (checkVersion !== nextCheckVersion && !listeners.size) {\n            checkVersion = nextCheckVersion;\n            propProxyStates.forEach(([propProxyState])=>{\n                const propVersion = propProxyState[1](nextCheckVersion);\n                if (propVersion > version) {\n                    version = propVersion;\n                }\n            });\n        }\n        return version;\n    };\n    const createPropListener = (prop)=>(op, nextVersion)=>{\n            const newOp = [\n                ...op\n            ];\n            newOp[1] = [\n                prop,\n                ...newOp[1]\n            ];\n            notifyUpdate(newOp, nextVersion);\n        };\n    const propProxyStates = /* @__PURE__ */ new Map();\n    const addPropListener = (prop, propProxyState)=>{\n        if (( false ? 0 : void 0) !== \"production\" && propProxyStates.has(prop)) {\n            throw new Error(\"prop listener already exists\");\n        }\n        if (listeners.size) {\n            const remove = propProxyState[3](createPropListener(prop));\n            propProxyStates.set(prop, [\n                propProxyState,\n                remove\n            ]);\n        } else {\n            propProxyStates.set(prop, [\n                propProxyState\n            ]);\n        }\n    };\n    const removePropListener = (prop)=>{\n        var _a;\n        const entry = propProxyStates.get(prop);\n        if (entry) {\n            propProxyStates.delete(prop);\n            (_a = entry[1]) == null ? void 0 : _a.call(entry);\n        }\n    };\n    const addListener = (listener)=>{\n        listeners.add(listener);\n        if (listeners.size === 1) {\n            propProxyStates.forEach(([propProxyState, prevRemove], prop)=>{\n                if (( false ? 0 : void 0) !== \"production\" && prevRemove) {\n                    throw new Error(\"remove already exists\");\n                }\n                const remove = propProxyState[3](createPropListener(prop));\n                propProxyStates.set(prop, [\n                    propProxyState,\n                    remove\n                ]);\n            });\n        }\n        const removeListener = ()=>{\n            listeners.delete(listener);\n            if (listeners.size === 0) {\n                propProxyStates.forEach(([propProxyState, remove], prop)=>{\n                    if (remove) {\n                        remove();\n                        propProxyStates.set(prop, [\n                            propProxyState\n                        ]);\n                    }\n                });\n            }\n        };\n        return removeListener;\n    };\n    const baseObject = Array.isArray(initialObject) ? [] : Object.create(Object.getPrototypeOf(initialObject));\n    const handler = {\n        deleteProperty (target, prop) {\n            const prevValue = Reflect.get(target, prop);\n            removePropListener(prop);\n            const deleted = Reflect.deleteProperty(target, prop);\n            if (deleted) {\n                notifyUpdate([\n                    \"delete\",\n                    [\n                        prop\n                    ],\n                    prevValue\n                ]);\n            }\n            return deleted;\n        },\n        set (target, prop, value, receiver) {\n            const hasPrevValue = Reflect.has(target, prop);\n            const prevValue = Reflect.get(target, prop, receiver);\n            if (hasPrevValue && (objectIs(prevValue, value) || proxyCache.has(value) && objectIs(prevValue, proxyCache.get(value)))) {\n                return true;\n            }\n            removePropListener(prop);\n            if (isObject(value)) {\n                value = (0,proxy_compare__WEBPACK_IMPORTED_MODULE_0__.getUntracked)(value) || value;\n            }\n            let nextValue = value;\n            if (value instanceof Promise) {\n                value.then((v)=>{\n                    value.status = \"fulfilled\";\n                    value.value = v;\n                    notifyUpdate([\n                        \"resolve\",\n                        [\n                            prop\n                        ],\n                        v\n                    ]);\n                }).catch((e)=>{\n                    value.status = \"rejected\";\n                    value.reason = e;\n                    notifyUpdate([\n                        \"reject\",\n                        [\n                            prop\n                        ],\n                        e\n                    ]);\n                });\n            } else {\n                if (!proxyStateMap.has(value) && canProxy(value)) {\n                    nextValue = proxyFunction(value);\n                }\n                const childProxyState = !refSet.has(nextValue) && proxyStateMap.get(nextValue);\n                if (childProxyState) {\n                    addPropListener(prop, childProxyState);\n                }\n            }\n            Reflect.set(target, prop, nextValue, receiver);\n            notifyUpdate([\n                \"set\",\n                [\n                    prop\n                ],\n                value,\n                prevValue\n            ]);\n            return true;\n        }\n    };\n    const proxyObject = newProxy(baseObject, handler);\n    proxyCache.set(initialObject, proxyObject);\n    const proxyState = [\n        baseObject,\n        ensureVersion,\n        createSnapshot,\n        addListener\n    ];\n    proxyStateMap.set(proxyObject, proxyState);\n    Reflect.ownKeys(initialObject).forEach((key)=>{\n        const desc = Object.getOwnPropertyDescriptor(initialObject, key);\n        if (\"value\" in desc) {\n            proxyObject[key] = initialObject[key];\n            delete desc.value;\n            delete desc.writable;\n        }\n        Object.defineProperty(baseObject, key, desc);\n    });\n    return proxyObject;\n})=>[\n        // public functions\n        proxyFunction,\n        // shared state\n        proxyStateMap,\n        refSet,\n        // internal things\n        objectIs,\n        newProxy,\n        canProxy,\n        defaultHandlePromise,\n        snapCache,\n        createSnapshot,\n        proxyCache,\n        versionHolder\n    ];\nconst [defaultProxyFunction] = buildProxyFunction();\nfunction proxy(initialObject = {}) {\n    return defaultProxyFunction(initialObject);\n}\nfunction getVersion(proxyObject) {\n    const proxyState = proxyStateMap.get(proxyObject);\n    return proxyState == null ? void 0 : proxyState[1]();\n}\nfunction subscribe(proxyObject, callback, notifyInSync) {\n    const proxyState = proxyStateMap.get(proxyObject);\n    if (( false ? 0 : void 0) !== \"production\" && !proxyState) {\n        console.warn(\"Please use proxy object\");\n    }\n    let promise;\n    const ops = [];\n    const addListener = proxyState[3];\n    let isListenerActive = false;\n    const listener = (op)=>{\n        ops.push(op);\n        if (notifyInSync) {\n            callback(ops.splice(0));\n            return;\n        }\n        if (!promise) {\n            promise = Promise.resolve().then(()=>{\n                promise = void 0;\n                if (isListenerActive) {\n                    callback(ops.splice(0));\n                }\n            });\n        }\n    };\n    const removeListener = addListener(listener);\n    isListenerActive = true;\n    return ()=>{\n        isListenerActive = false;\n        removeListener();\n    };\n}\nfunction snapshot(proxyObject, handlePromise) {\n    const proxyState = proxyStateMap.get(proxyObject);\n    if (( false ? 0 : void 0) !== \"production\" && !proxyState) {\n        console.warn(\"Please use proxy object\");\n    }\n    const [target, ensureVersion, createSnapshot] = proxyState;\n    return createSnapshot(target, ensureVersion(), handlePromise);\n}\nfunction ref(obj) {\n    refSet.add(obj);\n    return obj;\n}\nconst unstable_buildProxyFunction = buildProxyFunction;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdmFsdGlvL2VzbS92YW5pbGxhLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTBEO0FBRTFELE1BQU1FLFdBQVcsQ0FBQ0MsSUFBTSxPQUFPQSxNQUFNLFlBQVlBLE1BQU07QUFDdkQsTUFBTUMsZ0JBQWdCLGFBQWEsR0FBRyxJQUFJQztBQUMxQyxNQUFNQyxTQUFTLGFBQWEsR0FBRyxJQUFJQztBQUNuQyxNQUFNQyxxQkFBcUIsQ0FBQ0MsV0FBV0MsT0FBT0MsRUFBRSxFQUFFQyxXQUFXLENBQUNDLFFBQVFDLFVBQVksSUFBSUMsTUFBTUYsUUFBUUMsUUFBUSxFQUFFRSxXQUFXLENBQUNiLElBQU1ELFNBQVNDLE1BQU0sQ0FBQ0csT0FBT1csR0FBRyxDQUFDZCxNQUFPZSxDQUFBQSxNQUFNQyxPQUFPLENBQUNoQixNQUFNLENBQUVpQixDQUFBQSxPQUFPQyxRQUFRLElBQUlsQixDQUFBQSxDQUFDLEtBQU0sQ0FBRUEsQ0FBQUEsYUFBYUUsT0FBTSxLQUFNLENBQUVGLENBQUFBLGFBQWFJLE9BQU0sS0FBTSxDQUFFSixDQUFBQSxhQUFhbUIsS0FBSSxLQUFNLENBQUVuQixDQUFBQSxhQUFhb0IsTUFBSyxLQUFNLENBQUVwQixDQUFBQSxhQUFhcUIsSUFBRyxLQUFNLENBQUVyQixDQUFBQSxhQUFhc0IsTUFBSyxLQUFNLENBQUV0QixDQUFBQSxhQUFhdUIsTUFBSyxLQUFNLENBQUV2QixDQUFBQSxhQUFhd0IsV0FBVSxDQUFFLEVBQUVDLHVCQUF1QixDQUFDQztJQUMxYixPQUFRQSxRQUFRQyxNQUFNO1FBQ3BCLEtBQUs7WUFDSCxPQUFPRCxRQUFRRSxLQUFLO1FBQ3RCLEtBQUs7WUFDSCxNQUFNRixRQUFRRyxNQUFNO1FBQ3RCO1lBQ0UsTUFBTUg7SUFDVjtBQUNGLENBQUMsRUFBRUksWUFBWSxhQUFhLEdBQUcsSUFBSTVCLFNBQVMsRUFBRTZCLGlCQUFpQixDQUFDckIsUUFBUXNCLFNBQVNDLGdCQUFnQlIsb0JBQW9C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dkIsTUFBTWhELFdBQVcsQ0FBQ0Y7UUFDaEJpRCxJQUFJRSxJQUFJLENBQUNuRDtRQUNULElBQUk4QyxjQUFjO1lBQ2hCRCxTQUFTSSxJQUFJRyxNQUFNLENBQUM7WUFDcEI7UUFDRjtRQUNBLElBQUksQ0FBQ3ZGLFNBQVM7WUFDWkEsVUFBVXNCLFFBQVFrRSxPQUFPLEdBQUdwQixJQUFJLENBQUM7Z0JBQy9CcEUsVUFBVSxLQUFLO2dCQUNmLElBQUlxRixrQkFBa0I7b0JBQ3BCTCxTQUFTSSxJQUFJRyxNQUFNLENBQUM7Z0JBQ3RCO1lBQ0Y7UUFDRjtJQUNGO0lBQ0EsTUFBTTNCLGlCQUFpQkgsWUFBWXBCO0lBQ25DZ0QsbUJBQW1CO0lBQ25CLE9BQU87UUFDTEEsbUJBQW1CO1FBQ25CekI7SUFDRjtBQUNGO0FBQ0EsU0FBUzZCLFNBQVNoQixXQUFXLEVBQUVsRSxhQUFhO0lBQzFDLE1BQU1tRSxhQUFhbkcsY0FBY2tDLEdBQUcsQ0FBQ2dFO0lBQ3JDLElBQUksQ0FBQyxNQUFlLEdBQUcsQ0FBb0IsR0FBRyxLQUFLLE9BQU8sZ0JBQWdCLENBQUNDLFlBQVk7UUFDckZRLFFBQVFDLElBQUksQ0FBQztJQUNmO0lBQ0EsTUFBTSxDQUFDbkcsUUFBUXdDLGVBQWVuQixlQUFlLEdBQUdxRTtJQUNoRCxPQUFPckUsZUFBZXJCLFFBQVF3QyxpQkFBaUJqQjtBQUNqRDtBQUNBLFNBQVNtRixJQUFJQyxHQUFHO0lBQ2RsSCxPQUFPaUYsR0FBRyxDQUFDaUM7SUFDWCxPQUFPQTtBQUNUO0FBQ0EsTUFBTUMsOEJBQThCakg7QUFFZ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdGFibGUtcm91dGVyLXdlYi8uL25vZGVfbW9kdWxlcy92YWx0aW8vZXNtL3ZhbmlsbGEubWpzP2MxOWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWFya1RvVHJhY2ssIGdldFVudHJhY2tlZCB9IGZyb20gJ3Byb3h5LWNvbXBhcmUnO1xuXG5jb25zdCBpc09iamVjdCA9ICh4KSA9PiB0eXBlb2YgeCA9PT0gXCJvYmplY3RcIiAmJiB4ICE9PSBudWxsO1xuY29uc3QgcHJveHlTdGF0ZU1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpO1xuY29uc3QgcmVmU2V0ID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrU2V0KCk7XG5jb25zdCBidWlsZFByb3h5RnVuY3Rpb24gPSAob2JqZWN0SXMgPSBPYmplY3QuaXMsIG5ld1Byb3h5ID0gKHRhcmdldCwgaGFuZGxlcikgPT4gbmV3IFByb3h5KHRhcmdldCwgaGFuZGxlciksIGNhblByb3h5ID0gKHgpID0+IGlzT2JqZWN0KHgpICYmICFyZWZTZXQuaGFzKHgpICYmIChBcnJheS5pc0FycmF5KHgpIHx8ICEoU3ltYm9sLml0ZXJhdG9yIGluIHgpKSAmJiAhKHggaW5zdGFuY2VvZiBXZWFrTWFwKSAmJiAhKHggaW5zdGFuY2VvZiBXZWFrU2V0KSAmJiAhKHggaW5zdGFuY2VvZiBFcnJvcikgJiYgISh4IGluc3RhbmNlb2YgTnVtYmVyKSAmJiAhKHggaW5zdGFuY2VvZiBEYXRlKSAmJiAhKHggaW5zdGFuY2VvZiBTdHJpbmcpICYmICEoeCBpbnN0YW5jZW9mIFJlZ0V4cCkgJiYgISh4IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpLCBkZWZhdWx0SGFuZGxlUHJvbWlzZSA9IChwcm9taXNlKSA9PiB7XG4gIHN3aXRjaCAocHJvbWlzZS5zdGF0dXMpIHtcbiAgICBjYXNlIFwiZnVsZmlsbGVkXCI6XG4gICAgICByZXR1cm4gcHJvbWlzZS52YWx1ZTtcbiAgICBjYXNlIFwicmVqZWN0ZWRcIjpcbiAgICAgIHRocm93IHByb21pc2UucmVhc29uO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBwcm9taXNlO1xuICB9XG59LCBzbmFwQ2FjaGUgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKSwgY3JlYXRlU25hcHNob3QgPSAodGFyZ2V0LCB2ZXJzaW9uLCBoYW5kbGVQcm9taXNlID0gZGVmYXVsdEhhbmRsZVByb21pc2UpID0+IHtcbiAgY29uc3QgY2FjaGUgPSBzbmFwQ2FjaGUuZ2V0KHRhcmdldCk7XG4gIGlmICgoY2FjaGUgPT0gbnVsbCA/IHZvaWQgMCA6IGNhY2hlWzBdKSA9PT0gdmVyc2lvbikge1xuICAgIHJldHVybiBjYWNoZVsxXTtcbiAgfVxuICBjb25zdCBzbmFwID0gQXJyYXkuaXNBcnJheSh0YXJnZXQpID8gW10gOiBPYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZih0YXJnZXQpKTtcbiAgbWFya1RvVHJhY2soc25hcCwgdHJ1ZSk7XG4gIHNuYXBDYWNoZS5zZXQodGFyZ2V0LCBbdmVyc2lvbiwgc25hcF0pO1xuICBSZWZsZWN0Lm93bktleXModGFyZ2V0KS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzbmFwLCBrZXkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHZhbHVlID0gUmVmbGVjdC5nZXQodGFyZ2V0LCBrZXkpO1xuICAgIGNvbnN0IHsgZW51bWVyYWJsZSB9ID0gUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoXG4gICAgICB0YXJnZXQsXG4gICAgICBrZXlcbiAgICApO1xuICAgIGNvbnN0IGRlc2MgPSB7XG4gICAgICB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGUsXG4gICAgICAvLyBUaGlzIGlzIGludGVudGlvbmFsIHRvIGF2b2lkIGNvcHlpbmcgd2l0aCBwcm94eS1jb21wYXJlLlxuICAgICAgLy8gSXQncyBzdGlsbCBub24td3JpdGFibGUsIHNvIGl0IGF2b2lkcyBhc3NpZ25pbmcgYSB2YWx1ZS5cbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH07XG4gICAgaWYgKHJlZlNldC5oYXModmFsdWUpKSB7XG4gICAgICBtYXJrVG9UcmFjayh2YWx1ZSwgZmFsc2UpO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICBkZWxldGUgZGVzYy52YWx1ZTtcbiAgICAgIGRlc2MuZ2V0ID0gKCkgPT4gaGFuZGxlUHJvbWlzZSh2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChwcm94eVN0YXRlTWFwLmhhcyh2YWx1ZSkpIHtcbiAgICAgIGNvbnN0IFt0YXJnZXQyLCBlbnN1cmVWZXJzaW9uXSA9IHByb3h5U3RhdGVNYXAuZ2V0KFxuICAgICAgICB2YWx1ZVxuICAgICAgKTtcbiAgICAgIGRlc2MudmFsdWUgPSBjcmVhdGVTbmFwc2hvdChcbiAgICAgICAgdGFyZ2V0MixcbiAgICAgICAgZW5zdXJlVmVyc2lvbigpLFxuICAgICAgICBoYW5kbGVQcm9taXNlXG4gICAgICApO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc25hcCwga2V5LCBkZXNjKTtcbiAgfSk7XG4gIHJldHVybiBPYmplY3QucHJldmVudEV4dGVuc2lvbnMoc25hcCk7XG59LCBwcm94eUNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCksIHZlcnNpb25Ib2xkZXIgPSBbMSwgMV0sIHByb3h5RnVuY3Rpb24gPSAoaW5pdGlhbE9iamVjdCkgPT4ge1xuICBpZiAoIWlzT2JqZWN0KGluaXRpYWxPYmplY3QpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwib2JqZWN0IHJlcXVpcmVkXCIpO1xuICB9XG4gIGNvbnN0IGZvdW5kID0gcHJveHlDYWNoZS5nZXQoaW5pdGlhbE9iamVjdCk7XG4gIGlmIChmb3VuZCkge1xuICAgIHJldHVybiBmb3VuZDtcbiAgfVxuICBsZXQgdmVyc2lvbiA9IHZlcnNpb25Ib2xkZXJbMF07XG4gIGNvbnN0IGxpc3RlbmVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIGNvbnN0IG5vdGlmeVVwZGF0ZSA9IChvcCwgbmV4dFZlcnNpb24gPSArK3ZlcnNpb25Ib2xkZXJbMF0pID0+IHtcbiAgICBpZiAodmVyc2lvbiAhPT0gbmV4dFZlcnNpb24pIHtcbiAgICAgIHZlcnNpb24gPSBuZXh0VmVyc2lvbjtcbiAgICAgIGxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIob3AsIG5leHRWZXJzaW9uKSk7XG4gICAgfVxuICB9O1xuICBsZXQgY2hlY2tWZXJzaW9uID0gdmVyc2lvbkhvbGRlclsxXTtcbiAgY29uc3QgZW5zdXJlVmVyc2lvbiA9IChuZXh0Q2hlY2tWZXJzaW9uID0gKyt2ZXJzaW9uSG9sZGVyWzFdKSA9PiB7XG4gICAgaWYgKGNoZWNrVmVyc2lvbiAhPT0gbmV4dENoZWNrVmVyc2lvbiAmJiAhbGlzdGVuZXJzLnNpemUpIHtcbiAgICAgIGNoZWNrVmVyc2lvbiA9IG5leHRDaGVja1ZlcnNpb247XG4gICAgICBwcm9wUHJveHlTdGF0ZXMuZm9yRWFjaCgoW3Byb3BQcm94eVN0YXRlXSkgPT4ge1xuICAgICAgICBjb25zdCBwcm9wVmVyc2lvbiA9IHByb3BQcm94eVN0YXRlWzFdKG5leHRDaGVja1ZlcnNpb24pO1xuICAgICAgICBpZiAocHJvcFZlcnNpb24gPiB2ZXJzaW9uKSB7XG4gICAgICAgICAgdmVyc2lvbiA9IHByb3BWZXJzaW9uO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHZlcnNpb247XG4gIH07XG4gIGNvbnN0IGNyZWF0ZVByb3BMaXN0ZW5lciA9IChwcm9wKSA9PiAob3AsIG5leHRWZXJzaW9uKSA9PiB7XG4gICAgY29uc3QgbmV3T3AgPSBbLi4ub3BdO1xuICAgIG5ld09wWzFdID0gW3Byb3AsIC4uLm5ld09wWzFdXTtcbiAgICBub3RpZnlVcGRhdGUobmV3T3AsIG5leHRWZXJzaW9uKTtcbiAgfTtcbiAgY29uc3QgcHJvcFByb3h5U3RhdGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgY29uc3QgYWRkUHJvcExpc3RlbmVyID0gKHByb3AsIHByb3BQcm94eVN0YXRlKSA9PiB7XG4gICAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiICYmIHByb3BQcm94eVN0YXRlcy5oYXMocHJvcCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInByb3AgbGlzdGVuZXIgYWxyZWFkeSBleGlzdHNcIik7XG4gICAgfVxuICAgIGlmIChsaXN0ZW5lcnMuc2l6ZSkge1xuICAgICAgY29uc3QgcmVtb3ZlID0gcHJvcFByb3h5U3RhdGVbM10oY3JlYXRlUHJvcExpc3RlbmVyKHByb3ApKTtcbiAgICAgIHByb3BQcm94eVN0YXRlcy5zZXQocHJvcCwgW3Byb3BQcm94eVN0YXRlLCByZW1vdmVdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvcFByb3h5U3RhdGVzLnNldChwcm9wLCBbcHJvcFByb3h5U3RhdGVdKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHJlbW92ZVByb3BMaXN0ZW5lciA9IChwcm9wKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IGVudHJ5ID0gcHJvcFByb3h5U3RhdGVzLmdldChwcm9wKTtcbiAgICBpZiAoZW50cnkpIHtcbiAgICAgIHByb3BQcm94eVN0YXRlcy5kZWxldGUocHJvcCk7XG4gICAgICAoX2EgPSBlbnRyeVsxXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmNhbGwoZW50cnkpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgYWRkTGlzdGVuZXIgPSAobGlzdGVuZXIpID0+IHtcbiAgICBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcbiAgICBpZiAobGlzdGVuZXJzLnNpemUgPT09IDEpIHtcbiAgICAgIHByb3BQcm94eVN0YXRlcy5mb3JFYWNoKChbcHJvcFByb3h5U3RhdGUsIHByZXZSZW1vdmVdLCBwcm9wKSA9PiB7XG4gICAgICAgIGlmICgoaW1wb3J0Lm1ldGEuZW52ID8gaW1wb3J0Lm1ldGEuZW52Lk1PREUgOiB2b2lkIDApICE9PSBcInByb2R1Y3Rpb25cIiAmJiBwcmV2UmVtb3ZlKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwicmVtb3ZlIGFscmVhZHkgZXhpc3RzXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlbW92ZSA9IHByb3BQcm94eVN0YXRlWzNdKGNyZWF0ZVByb3BMaXN0ZW5lcihwcm9wKSk7XG4gICAgICAgIHByb3BQcm94eVN0YXRlcy5zZXQocHJvcCwgW3Byb3BQcm94eVN0YXRlLCByZW1vdmVdKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCByZW1vdmVMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgIGxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xuICAgICAgaWYgKGxpc3RlbmVycy5zaXplID09PSAwKSB7XG4gICAgICAgIHByb3BQcm94eVN0YXRlcy5mb3JFYWNoKChbcHJvcFByb3h5U3RhdGUsIHJlbW92ZV0sIHByb3ApID0+IHtcbiAgICAgICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgICAgICByZW1vdmUoKTtcbiAgICAgICAgICAgIHByb3BQcm94eVN0YXRlcy5zZXQocHJvcCwgW3Byb3BQcm94eVN0YXRlXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiByZW1vdmVMaXN0ZW5lcjtcbiAgfTtcbiAgY29uc3QgYmFzZU9iamVjdCA9IEFycmF5LmlzQXJyYXkoaW5pdGlhbE9iamVjdCkgPyBbXSA6IE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKGluaXRpYWxPYmplY3QpKTtcbiAgY29uc3QgaGFuZGxlciA9IHtcbiAgICBkZWxldGVQcm9wZXJ0eSh0YXJnZXQsIHByb3ApIHtcbiAgICAgIGNvbnN0IHByZXZWYWx1ZSA9IFJlZmxlY3QuZ2V0KHRhcmdldCwgcHJvcCk7XG4gICAgICByZW1vdmVQcm9wTGlzdGVuZXIocHJvcCk7XG4gICAgICBjb25zdCBkZWxldGVkID0gUmVmbGVjdC5kZWxldGVQcm9wZXJ0eSh0YXJnZXQsIHByb3ApO1xuICAgICAgaWYgKGRlbGV0ZWQpIHtcbiAgICAgICAgbm90aWZ5VXBkYXRlKFtcImRlbGV0ZVwiLCBbcHJvcF0sIHByZXZWYWx1ZV0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRlbGV0ZWQ7XG4gICAgfSxcbiAgICBzZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgICAgIGNvbnN0IGhhc1ByZXZWYWx1ZSA9IFJlZmxlY3QuaGFzKHRhcmdldCwgcHJvcCk7XG4gICAgICBjb25zdCBwcmV2VmFsdWUgPSBSZWZsZWN0LmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKTtcbiAgICAgIGlmIChoYXNQcmV2VmFsdWUgJiYgKG9iamVjdElzKHByZXZWYWx1ZSwgdmFsdWUpIHx8IHByb3h5Q2FjaGUuaGFzKHZhbHVlKSAmJiBvYmplY3RJcyhwcmV2VmFsdWUsIHByb3h5Q2FjaGUuZ2V0KHZhbHVlKSkpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmVtb3ZlUHJvcExpc3RlbmVyKHByb3ApO1xuICAgICAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9IGdldFVudHJhY2tlZCh2YWx1ZSkgfHwgdmFsdWU7XG4gICAgICB9XG4gICAgICBsZXQgbmV4dFZhbHVlID0gdmFsdWU7XG4gICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHZhbHVlLnRoZW4oKHYpID0+IHtcbiAgICAgICAgICB2YWx1ZS5zdGF0dXMgPSBcImZ1bGZpbGxlZFwiO1xuICAgICAgICAgIHZhbHVlLnZhbHVlID0gdjtcbiAgICAgICAgICBub3RpZnlVcGRhdGUoW1wicmVzb2x2ZVwiLCBbcHJvcF0sIHZdKTtcbiAgICAgICAgfSkuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICB2YWx1ZS5zdGF0dXMgPSBcInJlamVjdGVkXCI7XG4gICAgICAgICAgdmFsdWUucmVhc29uID0gZTtcbiAgICAgICAgICBub3RpZnlVcGRhdGUoW1wicmVqZWN0XCIsIFtwcm9wXSwgZV0pO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghcHJveHlTdGF0ZU1hcC5oYXModmFsdWUpICYmIGNhblByb3h5KHZhbHVlKSkge1xuICAgICAgICAgIG5leHRWYWx1ZSA9IHByb3h5RnVuY3Rpb24odmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNoaWxkUHJveHlTdGF0ZSA9ICFyZWZTZXQuaGFzKG5leHRWYWx1ZSkgJiYgcHJveHlTdGF0ZU1hcC5nZXQobmV4dFZhbHVlKTtcbiAgICAgICAgaWYgKGNoaWxkUHJveHlTdGF0ZSkge1xuICAgICAgICAgIGFkZFByb3BMaXN0ZW5lcihwcm9wLCBjaGlsZFByb3h5U3RhdGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBSZWZsZWN0LnNldCh0YXJnZXQsIHByb3AsIG5leHRWYWx1ZSwgcmVjZWl2ZXIpO1xuICAgICAgbm90aWZ5VXBkYXRlKFtcInNldFwiLCBbcHJvcF0sIHZhbHVlLCBwcmV2VmFsdWVdKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgcHJveHlPYmplY3QgPSBuZXdQcm94eShiYXNlT2JqZWN0LCBoYW5kbGVyKTtcbiAgcHJveHlDYWNoZS5zZXQoaW5pdGlhbE9iamVjdCwgcHJveHlPYmplY3QpO1xuICBjb25zdCBwcm94eVN0YXRlID0gW1xuICAgIGJhc2VPYmplY3QsXG4gICAgZW5zdXJlVmVyc2lvbixcbiAgICBjcmVhdGVTbmFwc2hvdCxcbiAgICBhZGRMaXN0ZW5lclxuICBdO1xuICBwcm94eVN0YXRlTWFwLnNldChwcm94eU9iamVjdCwgcHJveHlTdGF0ZSk7XG4gIFJlZmxlY3Qub3duS2V5cyhpbml0aWFsT2JqZWN0KS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBjb25zdCBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihcbiAgICAgIGluaXRpYWxPYmplY3QsXG4gICAgICBrZXlcbiAgICApO1xuICAgIGlmIChcInZhbHVlXCIgaW4gZGVzYykge1xuICAgICAgcHJveHlPYmplY3Rba2V5XSA9IGluaXRpYWxPYmplY3Rba2V5XTtcbiAgICAgIGRlbGV0ZSBkZXNjLnZhbHVlO1xuICAgICAgZGVsZXRlIGRlc2Mud3JpdGFibGU7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShiYXNlT2JqZWN0LCBrZXksIGRlc2MpO1xuICB9KTtcbiAgcmV0dXJuIHByb3h5T2JqZWN0O1xufSkgPT4gW1xuICAvLyBwdWJsaWMgZnVuY3Rpb25zXG4gIHByb3h5RnVuY3Rpb24sXG4gIC8vIHNoYXJlZCBzdGF0ZVxuICBwcm94eVN0YXRlTWFwLFxuICByZWZTZXQsXG4gIC8vIGludGVybmFsIHRoaW5nc1xuICBvYmplY3RJcyxcbiAgbmV3UHJveHksXG4gIGNhblByb3h5LFxuICBkZWZhdWx0SGFuZGxlUHJvbWlzZSxcbiAgc25hcENhY2hlLFxuICBjcmVhdGVTbmFwc2hvdCxcbiAgcHJveHlDYWNoZSxcbiAgdmVyc2lvbkhvbGRlclxuXTtcbmNvbnN0IFtkZWZhdWx0UHJveHlGdW5jdGlvbl0gPSBidWlsZFByb3h5RnVuY3Rpb24oKTtcbmZ1bmN0aW9uIHByb3h5KGluaXRpYWxPYmplY3QgPSB7fSkge1xuICByZXR1cm4gZGVmYXVsdFByb3h5RnVuY3Rpb24oaW5pdGlhbE9iamVjdCk7XG59XG5mdW5jdGlvbiBnZXRWZXJzaW9uKHByb3h5T2JqZWN0KSB7XG4gIGNvbnN0IHByb3h5U3RhdGUgPSBwcm94eVN0YXRlTWFwLmdldChwcm94eU9iamVjdCk7XG4gIHJldHVybiBwcm94eVN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBwcm94eVN0YXRlWzFdKCk7XG59XG5mdW5jdGlvbiBzdWJzY3JpYmUocHJveHlPYmplY3QsIGNhbGxiYWNrLCBub3RpZnlJblN5bmMpIHtcbiAgY29uc3QgcHJveHlTdGF0ZSA9IHByb3h5U3RhdGVNYXAuZ2V0KHByb3h5T2JqZWN0KTtcbiAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiICYmICFwcm94eVN0YXRlKSB7XG4gICAgY29uc29sZS53YXJuKFwiUGxlYXNlIHVzZSBwcm94eSBvYmplY3RcIik7XG4gIH1cbiAgbGV0IHByb21pc2U7XG4gIGNvbnN0IG9wcyA9IFtdO1xuICBjb25zdCBhZGRMaXN0ZW5lciA9IHByb3h5U3RhdGVbM107XG4gIGxldCBpc0xpc3RlbmVyQWN0aXZlID0gZmFsc2U7XG4gIGNvbnN0IGxpc3RlbmVyID0gKG9wKSA9PiB7XG4gICAgb3BzLnB1c2gob3ApO1xuICAgIGlmIChub3RpZnlJblN5bmMpIHtcbiAgICAgIGNhbGxiYWNrKG9wcy5zcGxpY2UoMCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXByb21pc2UpIHtcbiAgICAgIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcbiAgICAgICAgcHJvbWlzZSA9IHZvaWQgMDtcbiAgICAgICAgaWYgKGlzTGlzdGVuZXJBY3RpdmUpIHtcbiAgICAgICAgICBjYWxsYmFjayhvcHMuc3BsaWNlKDApKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuICBjb25zdCByZW1vdmVMaXN0ZW5lciA9IGFkZExpc3RlbmVyKGxpc3RlbmVyKTtcbiAgaXNMaXN0ZW5lckFjdGl2ZSA9IHRydWU7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgaXNMaXN0ZW5lckFjdGl2ZSA9IGZhbHNlO1xuICAgIHJlbW92ZUxpc3RlbmVyKCk7XG4gIH07XG59XG5mdW5jdGlvbiBzbmFwc2hvdChwcm94eU9iamVjdCwgaGFuZGxlUHJvbWlzZSkge1xuICBjb25zdCBwcm94eVN0YXRlID0gcHJveHlTdGF0ZU1hcC5nZXQocHJveHlPYmplY3QpO1xuICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgIXByb3h5U3RhdGUpIHtcbiAgICBjb25zb2xlLndhcm4oXCJQbGVhc2UgdXNlIHByb3h5IG9iamVjdFwiKTtcbiAgfVxuICBjb25zdCBbdGFyZ2V0LCBlbnN1cmVWZXJzaW9uLCBjcmVhdGVTbmFwc2hvdF0gPSBwcm94eVN0YXRlO1xuICByZXR1cm4gY3JlYXRlU25hcHNob3QodGFyZ2V0LCBlbnN1cmVWZXJzaW9uKCksIGhhbmRsZVByb21pc2UpO1xufVxuZnVuY3Rpb24gcmVmKG9iaikge1xuICByZWZTZXQuYWRkKG9iaik7XG4gIHJldHVybiBvYmo7XG59XG5jb25zdCB1bnN0YWJsZV9idWlsZFByb3h5RnVuY3Rpb24gPSBidWlsZFByb3h5RnVuY3Rpb247XG5cbmV4cG9ydCB7IGdldFZlcnNpb24sIHByb3h5LCByZWYsIHNuYXBzaG90LCBzdWJzY3JpYmUsIHVuc3RhYmxlX2J1aWxkUHJveHlGdW5jdGlvbiB9O1xuIl0sIm5hbWVzIjpbIm1hcmtUb1RyYWNrIiwiZ2V0VW50cmFja2VkIiwiaXNPYmplY3QiLCJ4IiwicHJveHlTdGF0ZU1hcCIsIldlYWtNYXAiLCJyZWZTZXQiLCJXZWFrU2V0IiwiYnVpbGRQcm94eUZ1bmN0aW9uIiwib2JqZWN0SXMiLCJPYmplY3QiLCJpcyIsIm5ld1Byb3h5IiwidGFyZ2V0IiwiaGFuZGxlciIsIlByb3h5IiwiY2FuUHJveHkiLCJoYXMiLCJBcnJheSIsImlzQXJyYXkiLCJTeW1ib2wiLCJpdGVyYXRvciIsIkVycm9yIiwiTnVtYmVyIiwiRGF0ZSIsIlN0cmluZyIsIlJlZ0V4cCIsIkFycmF5QnVmZmVyIiwiZGVmYXVsdEhhbmRsZVByb21pc2UiLCJwcm9taXNlIiwic3RhdHVzIiwidmFsdWUiLCJyZWFzb24iLCJzbmFwQ2FjaGUiLCJjcmVhdGVTbmFwc2hvdCIsInZlcnNpb24iLCJoYW5kbGVQcm9taXNlIiwiY2FjaGUiLCJnZXQiLCJzbmFwIiwiY3JlYXRlIiwiZ2V0UHJvdG90eXBlT2YiLCJzZXQiLCJSZWZsZWN0Iiwib3duS2V5cyIsImZvckVhY2giLCJrZXkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiZGVzYyIsImNvbmZpZ3VyYWJsZSIsIlByb21pc2UiLCJ0YXJnZXQyIiwiZW5zdXJlVmVyc2lvbiIsImRlZmluZVByb3BlcnR5IiwicHJldmVudEV4dGVuc2lvbnMiLCJwcm94eUNhY2hlIiwidmVyc2lvbkhvbGRlciIsInByb3h5RnVuY3Rpb24iLCJpbml0aWFsT2JqZWN0IiwiZm91bmQiLCJsaXN0ZW5lcnMiLCJTZXQiLCJub3RpZnlVcGRhdGUiLCJvcCIsIm5leHRWZXJzaW9uIiwibGlzdGVuZXIiLCJjaGVja1ZlcnNpb24iLCJuZXh0Q2hlY2tWZXJzaW9uIiwic2l6ZSIsInByb3BQcm94eVN0YXRlcyIsInByb3BQcm94eVN0YXRlIiwicHJvcFZlcnNpb24iLCJjcmVhdGVQcm9wTGlzdGVuZXIiLCJwcm9wIiwibmV3T3AiLCJNYXAiLCJhZGRQcm9wTGlzdGVuZXIiLCJlbnYiLCJNT0RFIiwicmVtb3ZlIiwicmVtb3ZlUHJvcExpc3RlbmVyIiwiX2EiLCJlbnRyeSIsImRlbGV0ZSIsImNhbGwiLCJhZGRMaXN0ZW5lciIsImFkZCIsInByZXZSZW1vdmUiLCJyZW1vdmVMaXN0ZW5lciIsImJhc2VPYmplY3QiLCJkZWxldGVQcm9wZXJ0eSIsInByZXZWYWx1ZSIsImRlbGV0ZWQiLCJyZWNlaXZlciIsImhhc1ByZXZWYWx1ZSIsIm5leHRWYWx1ZSIsInRoZW4iLCJ2IiwiY2F0Y2giLCJlIiwiY2hpbGRQcm94eVN0YXRlIiwicHJveHlPYmplY3QiLCJwcm94eVN0YXRlIiwid3JpdGFibGUiLCJkZWZhdWx0UHJveHlGdW5jdGlvbiIsInByb3h5IiwiZ2V0VmVyc2lvbiIsInN1YnNjcmliZSIsImNhbGxiYWNrIiwibm90aWZ5SW5TeW5jIiwiY29uc29sZSIsIndhcm4iLCJvcHMiLCJpc0xpc3RlbmVyQWN0aXZlIiwicHVzaCIsInNwbGljZSIsInJlc29sdmUiLCJzbmFwc2hvdCIsInJlZiIsIm9iaiIsInVuc3RhYmxlX2J1aWxkUHJveHlGdW5jdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/valtio/esm/vanilla.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/valtio/esm/vanilla/utils.mjs":
/*!***************************************************!*\
  !*** ./node_modules/valtio/esm/vanilla/utils.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addComputed: () => (/* binding */ addComputed_DEPRECATED),\n/* harmony export */   derive: () => (/* reexport safe */ derive_valtio__WEBPACK_IMPORTED_MODULE_0__.derive),\n/* harmony export */   devtools: () => (/* binding */ devtools),\n/* harmony export */   proxyMap: () => (/* binding */ proxyMap),\n/* harmony export */   proxySet: () => (/* binding */ proxySet),\n/* harmony export */   proxyWithComputed: () => (/* binding */ proxyWithComputed_DEPRECATED),\n/* harmony export */   proxyWithHistory: () => (/* binding */ proxyWithHistory_DEPRECATED),\n/* harmony export */   subscribeKey: () => (/* binding */ subscribeKey),\n/* harmony export */   underive: () => (/* reexport safe */ derive_valtio__WEBPACK_IMPORTED_MODULE_0__.underive),\n/* harmony export */   unstable_deriveSubscriptions: () => (/* reexport safe */ derive_valtio__WEBPACK_IMPORTED_MODULE_0__.unstable_deriveSubscriptions),\n/* harmony export */   watch: () => (/* binding */ watch)\n/* harmony export */ });\n/* harmony import */ var valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! valtio/vanilla */ \"(ssr)/./node_modules/valtio/esm/vanilla.mjs\");\n/* harmony import */ var derive_valtio__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! derive-valtio */ \"(ssr)/./node_modules/derive-valtio/dist/index.modern.js\");\n\n\n\nfunction subscribeKey(proxyObject, key, callback, notifyInSync) {\n    let prevValue = proxyObject[key];\n    return (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.subscribe)(proxyObject, ()=>{\n        const nextValue = proxyObject[key];\n        if (!Object.is(prevValue, nextValue)) {\n            callback(prevValue = nextValue);\n        }\n    }, notifyInSync);\n}\nlet currentCleanups;\nfunction watch(callback, options) {\n    let alive = true;\n    const cleanups = /* @__PURE__ */ new Set();\n    const subscriptions = /* @__PURE__ */ new Map();\n    const cleanup = ()=>{\n        if (alive) {\n            alive = false;\n            cleanups.forEach((clean)=>clean());\n            cleanups.clear();\n            subscriptions.forEach((unsubscribe)=>unsubscribe());\n            subscriptions.clear();\n        }\n    };\n    const revalidate = async ()=>{\n        if (!alive) {\n            return;\n        }\n        cleanups.forEach((clean)=>clean());\n        cleanups.clear();\n        const proxiesToSubscribe = /* @__PURE__ */ new Set();\n        const parent = currentCleanups;\n        currentCleanups = cleanups;\n        try {\n            const promiseOrPossibleCleanup = callback((proxyObject)=>{\n                proxiesToSubscribe.add(proxyObject);\n                if (alive && !subscriptions.has(proxyObject)) {\n                    const unsubscribe = (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.subscribe)(proxyObject, revalidate, options == null ? void 0 : options.sync);\n                    subscriptions.set(proxyObject, unsubscribe);\n                }\n                return proxyObject;\n            });\n            const couldBeCleanup = promiseOrPossibleCleanup && promiseOrPossibleCleanup instanceof Promise ? await promiseOrPossibleCleanup : promiseOrPossibleCleanup;\n            if (couldBeCleanup) {\n                if (alive) {\n                    cleanups.add(couldBeCleanup);\n                } else {\n                    cleanup();\n                }\n            }\n        } finally{\n            currentCleanups = parent;\n        }\n        subscriptions.forEach((unsubscribe, proxyObject)=>{\n            if (!proxiesToSubscribe.has(proxyObject)) {\n                subscriptions.delete(proxyObject);\n                unsubscribe();\n            }\n        });\n    };\n    if (currentCleanups) {\n        currentCleanups.add(cleanup);\n    }\n    revalidate();\n    return cleanup;\n}\nconst DEVTOOLS = Symbol();\nfunction devtools(proxyObject, options) {\n    if (typeof options === \"string\") {\n        console.warn(\"string name option is deprecated, use { name }. https://github.com/pmndrs/valtio/pull/400\");\n        options = {\n            name: options\n        };\n    }\n    const { enabled, name = \"\", ...rest } = options || {};\n    let extension;\n    try {\n        extension = (enabled != null ? enabled : ( false ? 0 : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n    } catch (e) {}\n    if (!extension) {\n        if (( false ? 0 : void 0) !== \"production\" && enabled) {\n            console.warn(\"[Warning] Please install/enable Redux devtools extension\");\n        }\n        return;\n    }\n    let isTimeTraveling = false;\n    const devtools2 = extension.connect({\n        name,\n        ...rest\n    });\n    const unsub1 = (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.subscribe)(proxyObject, (ops)=>{\n        const action = ops.filter(([_, path])=>path[0] !== DEVTOOLS).map(([op, path])=>`${op}:${path.map(String).join(\".\")}`).join(\", \");\n        if (!action) {\n            return;\n        }\n        if (isTimeTraveling) {\n            isTimeTraveling = false;\n        } else {\n            const snapWithoutDevtools = Object.assign({}, (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.snapshot)(proxyObject));\n            delete snapWithoutDevtools[DEVTOOLS];\n            devtools2.send({\n                type: action,\n                updatedAt: /* @__PURE__ */ new Date().toLocaleString()\n            }, snapWithoutDevtools);\n        }\n    });\n    const unsub2 = devtools2.subscribe((message)=>{\n        var _a, _b, _c, _d, _e, _f;\n        if (message.type === \"ACTION\" && message.payload) {\n            try {\n                Object.assign(proxyObject, JSON.parse(message.payload));\n            } catch (e) {\n                console.error(\"please dispatch a serializable value that JSON.parse() and proxy() support\\n\", e);\n            }\n        }\n        if (message.type === \"DISPATCH\" && message.state) {\n            if (((_a = message.payload) == null ? void 0 : _a.type) === \"JUMP_TO_ACTION\" || ((_b = message.payload) == null ? void 0 : _b.type) === \"JUMP_TO_STATE\") {\n                isTimeTraveling = true;\n                const state = JSON.parse(message.state);\n                Object.assign(proxyObject, state);\n            }\n            proxyObject[DEVTOOLS] = message;\n        } else if (message.type === \"DISPATCH\" && ((_c = message.payload) == null ? void 0 : _c.type) === \"COMMIT\") {\n            devtools2.init((0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.snapshot)(proxyObject));\n        } else if (message.type === \"DISPATCH\" && ((_d = message.payload) == null ? void 0 : _d.type) === \"IMPORT_STATE\") {\n            const actions = (_e = message.payload.nextLiftedState) == null ? void 0 : _e.actionsById;\n            const computedStates = ((_f = message.payload.nextLiftedState) == null ? void 0 : _f.computedStates) || [];\n            isTimeTraveling = true;\n            computedStates.forEach(({ state }, index)=>{\n                const action = actions[index] || \"No action found\";\n                Object.assign(proxyObject, state);\n                if (index === 0) {\n                    devtools2.init((0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.snapshot)(proxyObject));\n                } else {\n                    devtools2.send(action, (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.snapshot)(proxyObject));\n                }\n            });\n        }\n    });\n    devtools2.init((0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.snapshot)(proxyObject));\n    return ()=>{\n        unsub1();\n        unsub2 == null ? void 0 : unsub2();\n    };\n}\nfunction addComputed_DEPRECATED(proxyObject, computedFns_FAKE, targetObject = proxyObject) {\n    if (( false ? 0 : void 0) !== \"production\") {\n        console.warn(\"addComputed is deprecated. Please consider using `derive`. Falling back to emulation with derive. https://github.com/pmndrs/valtio/pull/201\");\n    }\n    const derivedFns = {};\n    Object.keys(computedFns_FAKE).forEach((key)=>{\n        derivedFns[key] = (get)=>computedFns_FAKE[key](get(proxyObject));\n    });\n    return (0,derive_valtio__WEBPACK_IMPORTED_MODULE_0__.derive)(derivedFns, {\n        proxy: targetObject\n    });\n}\nfunction proxyWithComputed_DEPRECATED(initialObject, computedFns) {\n    if (( false ? 0 : void 0) !== \"production\") {\n        console.warn('proxyWithComputed is deprecated. Please follow \"Computed Properties\" guide in docs.');\n    }\n    Object.keys(computedFns).forEach((key)=>{\n        if (Object.getOwnPropertyDescriptor(initialObject, key)) {\n            throw new Error(\"object property already defined\");\n        }\n        const computedFn = computedFns[key];\n        const { get, set } = typeof computedFn === \"function\" ? {\n            get: computedFn\n        } : computedFn;\n        const desc = {};\n        desc.get = ()=>get((0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.snapshot)(proxyObject));\n        if (set) {\n            desc.set = (newValue)=>set(proxyObject, newValue);\n        }\n        Object.defineProperty(initialObject, key, desc);\n    });\n    const proxyObject = (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.proxy)(initialObject);\n    return proxyObject;\n}\nconst isObject = (x)=>typeof x === \"object\" && x !== null;\nlet refSet;\nconst deepClone = (obj)=>{\n    if (!refSet) {\n        refSet = (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.unstable_buildProxyFunction)()[2];\n    }\n    if (!isObject(obj) || refSet.has(obj)) {\n        return obj;\n    }\n    const baseObject = Array.isArray(obj) ? [] : Object.create(Object.getPrototypeOf(obj));\n    Reflect.ownKeys(obj).forEach((key)=>{\n        baseObject[key] = deepClone(obj[key]);\n    });\n    return baseObject;\n};\nfunction proxyWithHistory_DEPRECATED(initialValue, skipSubscribe = false) {\n    if (( false ? 0 : void 0) !== \"production\") {\n        console.warn('proxyWithHistory is deprecated. Please use the \"valtio-history\" package; refer to the docs');\n    }\n    const proxyObject = (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.proxy)({\n        value: initialValue,\n        history: (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.ref)({\n            wip: void 0,\n            // to avoid infinite loop\n            snapshots: [],\n            index: -1\n        }),\n        clone: deepClone,\n        canUndo: ()=>proxyObject.history.index > 0,\n        undo: ()=>{\n            if (proxyObject.canUndo()) {\n                proxyObject.value = proxyObject.history.wip = proxyObject.clone(proxyObject.history.snapshots[--proxyObject.history.index]);\n            }\n        },\n        canRedo: ()=>proxyObject.history.index < proxyObject.history.snapshots.length - 1,\n        redo: ()=>{\n            if (proxyObject.canRedo()) {\n                proxyObject.value = proxyObject.history.wip = proxyObject.clone(proxyObject.history.snapshots[++proxyObject.history.index]);\n            }\n        },\n        saveHistory: ()=>{\n            proxyObject.history.snapshots.splice(proxyObject.history.index + 1);\n            proxyObject.history.snapshots.push((0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.snapshot)(proxyObject).value);\n            ++proxyObject.history.index;\n        },\n        subscribe: ()=>(0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.subscribe)(proxyObject, (ops)=>{\n                if (ops.every((op)=>op[1][0] === \"value\" && (op[0] !== \"set\" || op[2] !== proxyObject.history.wip))) {\n                    proxyObject.saveHistory();\n                }\n            })\n    });\n    proxyObject.saveHistory();\n    if (!skipSubscribe) {\n        proxyObject.subscribe();\n    }\n    return proxyObject;\n}\nfunction proxySet(initialValues) {\n    const set = (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.proxy)({\n        data: Array.from(new Set(initialValues)),\n        has (value) {\n            return this.data.indexOf(value) !== -1;\n        },\n        add (value) {\n            let hasProxy = false;\n            if (typeof value === \"object\" && value !== null) {\n                hasProxy = this.data.indexOf((0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.proxy)(value)) !== -1;\n            }\n            if (this.data.indexOf(value) === -1 && !hasProxy) {\n                this.data.push(value);\n            }\n            return this;\n        },\n        delete (value) {\n            const index = this.data.indexOf(value);\n            if (index === -1) {\n                return false;\n            }\n            this.data.splice(index, 1);\n            return true;\n        },\n        clear () {\n            this.data.splice(0);\n        },\n        get size () {\n            return this.data.length;\n        },\n        forEach (cb) {\n            this.data.forEach((value)=>{\n                cb(value, value, this);\n            });\n        },\n        get [Symbol.toStringTag] () {\n            return \"Set\";\n        },\n        toJSON () {\n            return new Set(this.data);\n        },\n        [Symbol.iterator] () {\n            return this.data[Symbol.iterator]();\n        },\n        values () {\n            return this.data.values();\n        },\n        keys () {\n            return this.data.values();\n        },\n        entries () {\n            return new Set(this.data).entries();\n        }\n    });\n    Object.defineProperties(set, {\n        data: {\n            enumerable: false\n        },\n        size: {\n            enumerable: false\n        },\n        toJSON: {\n            enumerable: false\n        }\n    });\n    Object.seal(set);\n    return set;\n}\nfunction proxyMap(entries) {\n    const map = (0,valtio_vanilla__WEBPACK_IMPORTED_MODULE_1__.proxy)({\n        data: Array.from(entries || []),\n        has (key) {\n            return this.data.some((p)=>p[0] === key);\n        },\n        set (key, value) {\n            const record = this.data.find((p)=>p[0] === key);\n            if (record) {\n                record[1] = value;\n            } else {\n                this.data.push([\n                    key,\n                    value\n                ]);\n            }\n            return this;\n        },\n        get (key) {\n            var _a;\n            return (_a = this.data.find((p)=>p[0] === key)) == null ? void 0 : _a[1];\n        },\n        delete (key) {\n            const index = this.data.findIndex((p)=>p[0] === key);\n            if (index === -1) {\n                return false;\n            }\n            this.data.splice(index, 1);\n            return true;\n        },\n        clear () {\n            this.data.splice(0);\n        },\n        get size () {\n            return this.data.length;\n        },\n        toJSON () {\n            return new Map(this.data);\n        },\n        forEach (cb) {\n            this.data.forEach((p)=>{\n                cb(p[1], p[0], this);\n            });\n        },\n        keys () {\n            return this.data.map((p)=>p[0]).values();\n        },\n        values () {\n            return this.data.map((p)=>p[1]).values();\n        },\n        entries () {\n            return new Map(this.data).entries();\n        },\n        get [Symbol.toStringTag] () {\n            return \"Map\";\n        },\n        [Symbol.iterator] () {\n            return this.entries();\n        }\n    });\n    Object.defineProperties(map, {\n        data: {\n            enumerable: false\n        },\n        size: {\n            enumerable: false\n        },\n        toJSON: {\n            enumerable: false\n        }\n    });\n    Object.seal(map);\n    return map;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdmFsdGlvL2VzbS92YW5pbGxhL3V0aWxzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQThGO0FBQ3ZEO0FBQ3dDO0FBRS9FLFNBQVNRLGFBQWFDLFdBQVcsRUFBRUMsR0FBRyxFQUFFQyxRQUFRLEVBQUVDLFlBQVk7SUFDNUQsSUFBSUMsWUFBWUosV0FBVyxDQUFDQyxJQUFJO0lBQ2hDLE9BQU9WLHlEQUFTQSxDQUNkUyxhQUNBO1FBQ0UsTUFBTUssWUFBWUwsV0FBVyxDQUFDQyxJQUFJO1FBQ2xDLElBQUksQ0FBQ0ssT0FBT0MsRUFBRSxDQUFDSCxXQUFXQyxZQUFZO1lBQ3BDSCxTQUFTRSxZQUFZQztRQUN2QjtJQUNGLEdBQ0FGO0FBRUo7QUFFQSxJQUFJSztBQUNKLFNBQVNDLE1BQU1QLFFBQVEsRUFBRVEsT0FBTztJQUM5QixJQUFJQyxRQUFRO0lBQ1osTUFBTUMsV0FBVyxhQUFhLEdBQUcsSUFBSUM7SUFDckMsTUFBTUMsZ0JBQWdCLGFBQWEsR0FBRyxJQUFJQztJQUMxQyxNQUFNQyxVQUFVO1FBQ2QsSUFBSUwsT0FBTztZQUNUQSxRQUFRO1lBQ1JDLFNBQVNLLE9BQU8sQ0FBQyxDQUFDQyxRQUFVQTtZQUM1Qk4sU0FBU08sS0FBSztZQUNkTCxjQUFjRyxPQUFPLENBQUMsQ0FBQ0csY0FBZ0JBO1lBQ3ZDTixjQUFjSyxLQUFLO1FBQ3JCO0lBQ0Y7SUFDQSxNQUFNRSxhQUFhO1FBQ2pCLElBQUksQ0FBQ1YsT0FBTztZQUNWO1FBQ0Y7UUFDQUMsU0FBU0ssT0FBTyxDQUFDLENBQUNDLFFBQVVBO1FBQzVCTixTQUFTTyxLQUFLO1FBQ2QsTUFBTUcscUJBQXFCLGFBQWEsR0FBRyxJQUFJVDtRQUMvQyxNQUFNVSxTQUFTZjtRQUNmQSxrQkFBa0JJO1FBQ2xCLElBQUk7WUFDRixNQUFNWSwyQkFBMkJ0QixTQUFTLENBQUNGO2dCQUN6Q3NCLG1CQUFtQkcsR0FBRyxDQUFDekI7Z0JBQ3ZCLElBQUlXLFNBQVMs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QUN6QjtRQUNBZTtZQUNFLE9BQU8sSUFBSTNILElBQUksSUFBSSxDQUFDb0gsSUFBSTtRQUMxQjtRQUNBbEgsU0FBUXVILEVBQUU7WUFDUixJQUFJLENBQUNMLElBQUksQ0FBQ2xILE9BQU8sQ0FBQyxDQUFDa0k7Z0JBQ2pCWCxHQUFHVyxDQUFDLENBQUMsRUFBRSxFQUFFQSxDQUFDLENBQUMsRUFBRSxFQUFFLElBQUk7WUFDckI7UUFDRjtRQUNBMUQ7WUFDRSxPQUFPLElBQUksQ0FBQzBDLElBQUksQ0FBQzVFLEdBQUcsQ0FBQyxDQUFDNEYsSUFBTUEsQ0FBQyxDQUFDLEVBQUUsRUFBRVAsTUFBTTtRQUMxQztRQUNBQTtZQUNFLE9BQU8sSUFBSSxDQUFDVCxJQUFJLENBQUM1RSxHQUFHLENBQUMsQ0FBQzRGLElBQU1BLENBQUMsQ0FBQyxFQUFFLEVBQUVQLE1BQU07UUFDMUM7UUFDQUM7WUFDRSxPQUFPLElBQUk5SCxJQUFJLElBQUksQ0FBQ29ILElBQUksRUFBRVUsT0FBTztRQUNuQztRQUNBLElBQUksQ0FBQzVHLE9BQU93RyxXQUFXLENBQUMsSUFBRztZQUN6QixPQUFPO1FBQ1Q7UUFDQSxDQUFDeEcsT0FBTzBHLFFBQVEsQ0FBQztZQUNmLE9BQU8sSUFBSSxDQUFDRSxPQUFPO1FBQ3JCO0lBQ0Y7SUFDQXZJLE9BQU93SSxnQkFBZ0IsQ0FBQ3ZGLEtBQUs7UUFDM0I0RSxNQUFNO1lBQ0pZLFlBQVk7UUFDZDtRQUNBUixNQUFNO1lBQ0pRLFlBQVk7UUFDZDtRQUNBTCxRQUFRO1lBQ05LLFlBQVk7UUFDZDtJQUNGO0lBQ0F6SSxPQUFPMEksSUFBSSxDQUFDekY7SUFDWixPQUFPQTtBQUNUO0FBRXdNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3RhYmxlLXJvdXRlci13ZWIvLi9ub2RlX21vZHVsZXMvdmFsdGlvL2VzbS92YW5pbGxhL3V0aWxzLm1qcz9jNzFkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN1YnNjcmliZSwgc25hcHNob3QsIHByb3h5LCByZWYsIHVuc3RhYmxlX2J1aWxkUHJveHlGdW5jdGlvbiB9IGZyb20gJ3ZhbHRpby92YW5pbGxhJztcbmltcG9ydCB7IGRlcml2ZSB9IGZyb20gJ2Rlcml2ZS12YWx0aW8nO1xuZXhwb3J0IHsgZGVyaXZlLCB1bmRlcml2ZSwgdW5zdGFibGVfZGVyaXZlU3Vic2NyaXB0aW9ucyB9IGZyb20gJ2Rlcml2ZS12YWx0aW8nO1xuXG5mdW5jdGlvbiBzdWJzY3JpYmVLZXkocHJveHlPYmplY3QsIGtleSwgY2FsbGJhY2ssIG5vdGlmeUluU3luYykge1xuICBsZXQgcHJldlZhbHVlID0gcHJveHlPYmplY3Rba2V5XTtcbiAgcmV0dXJuIHN1YnNjcmliZShcbiAgICBwcm94eU9iamVjdCxcbiAgICAoKSA9PiB7XG4gICAgICBjb25zdCBuZXh0VmFsdWUgPSBwcm94eU9iamVjdFtrZXldO1xuICAgICAgaWYgKCFPYmplY3QuaXMocHJldlZhbHVlLCBuZXh0VmFsdWUpKSB7XG4gICAgICAgIGNhbGxiYWNrKHByZXZWYWx1ZSA9IG5leHRWYWx1ZSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBub3RpZnlJblN5bmNcbiAgKTtcbn1cblxubGV0IGN1cnJlbnRDbGVhbnVwcztcbmZ1bmN0aW9uIHdhdGNoKGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gIGxldCBhbGl2ZSA9IHRydWU7XG4gIGNvbnN0IGNsZWFudXBzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgY29uc3Qgc3Vic2NyaXB0aW9ucyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB7XG4gICAgaWYgKGFsaXZlKSB7XG4gICAgICBhbGl2ZSA9IGZhbHNlO1xuICAgICAgY2xlYW51cHMuZm9yRWFjaCgoY2xlYW4pID0+IGNsZWFuKCkpO1xuICAgICAgY2xlYW51cHMuY2xlYXIoKTtcbiAgICAgIHN1YnNjcmlwdGlvbnMuZm9yRWFjaCgodW5zdWJzY3JpYmUpID0+IHVuc3Vic2NyaWJlKCkpO1xuICAgICAgc3Vic2NyaXB0aW9ucy5jbGVhcigpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgcmV2YWxpZGF0ZSA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoIWFsaXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNsZWFudXBzLmZvckVhY2goKGNsZWFuKSA9PiBjbGVhbigpKTtcbiAgICBjbGVhbnVwcy5jbGVhcigpO1xuICAgIGNvbnN0IHByb3hpZXNUb1N1YnNjcmliZSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgY29uc3QgcGFyZW50ID0gY3VycmVudENsZWFudXBzO1xuICAgIGN1cnJlbnRDbGVhbnVwcyA9IGNsZWFudXBzO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwcm9taXNlT3JQb3NzaWJsZUNsZWFudXAgPSBjYWxsYmFjaygocHJveHlPYmplY3QpID0+IHtcbiAgICAgICAgcHJveGllc1RvU3Vic2NyaWJlLmFkZChwcm94eU9iamVjdCk7XG4gICAgICAgIGlmIChhbGl2ZSAmJiAhc3Vic2NyaXB0aW9ucy5oYXMocHJveHlPYmplY3QpKSB7XG4gICAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSBzdWJzY3JpYmUocHJveHlPYmplY3QsIHJldmFsaWRhdGUsIG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuc3luYyk7XG4gICAgICAgICAgc3Vic2NyaXB0aW9ucy5zZXQocHJveHlPYmplY3QsIHVuc3Vic2NyaWJlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJveHlPYmplY3Q7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGNvdWxkQmVDbGVhbnVwID0gcHJvbWlzZU9yUG9zc2libGVDbGVhbnVwICYmIHByb21pc2VPclBvc3NpYmxlQ2xlYW51cCBpbnN0YW5jZW9mIFByb21pc2UgPyBhd2FpdCBwcm9taXNlT3JQb3NzaWJsZUNsZWFudXAgOiBwcm9taXNlT3JQb3NzaWJsZUNsZWFudXA7XG4gICAgICBpZiAoY291bGRCZUNsZWFudXApIHtcbiAgICAgICAgaWYgKGFsaXZlKSB7XG4gICAgICAgICAgY2xlYW51cHMuYWRkKGNvdWxkQmVDbGVhbnVwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgY3VycmVudENsZWFudXBzID0gcGFyZW50O1xuICAgIH1cbiAgICBzdWJzY3JpcHRpb25zLmZvckVhY2goKHVuc3Vic2NyaWJlLCBwcm94eU9iamVjdCkgPT4ge1xuICAgICAgaWYgKCFwcm94aWVzVG9TdWJzY3JpYmUuaGFzKHByb3h5T2JqZWN0KSkge1xuICAgICAgICBzdWJzY3JpcHRpb25zLmRlbGV0ZShwcm94eU9iamVjdCk7XG4gICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIGlmIChjdXJyZW50Q2xlYW51cHMpIHtcbiAgICBjdXJyZW50Q2xlYW51cHMuYWRkKGNsZWFudXApO1xuICB9XG4gIHJldmFsaWRhdGUoKTtcbiAgcmV0dXJuIGNsZWFudXA7XG59XG5cbmNvbnN0IERFVlRPT0xTID0gU3ltYm9sKCk7XG5mdW5jdGlvbiBkZXZ0b29scyhwcm94eU9iamVjdCwgb3B0aW9ucykge1xuICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcInN0cmluZyBuYW1lIG9wdGlvbiBpcyBkZXByZWNhdGVkLCB1c2UgeyBuYW1lIH0uIGh0dHBzOi8vZ2l0aHViLmNvbS9wbW5kcnMvdmFsdGlvL3B1bGwvNDAwXCJcbiAgICApO1xuICAgIG9wdGlvbnMgPSB7IG5hbWU6IG9wdGlvbnMgfTtcbiAgfVxuICBjb25zdCB7IGVuYWJsZWQsIG5hbWUgPSBcIlwiLCAuLi5yZXN0IH0gPSBvcHRpb25zIHx8IHt9O1xuICBsZXQgZXh0ZW5zaW9uO1xuICB0cnkge1xuICAgIGV4dGVuc2lvbiA9IChlbmFibGVkICE9IG51bGwgPyBlbmFibGVkIDogKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIpICYmIHdpbmRvdy5fX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9fO1xuICB9IGNhdGNoIChlKSB7XG4gIH1cbiAgaWYgKCFleHRlbnNpb24pIHtcbiAgICBpZiAoKGltcG9ydC5tZXRhLmVudiA/IGltcG9ydC5tZXRhLmVudi5NT0RFIDogdm9pZCAwKSAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgZW5hYmxlZCkge1xuICAgICAgY29uc29sZS53YXJuKFwiW1dhcm5pbmddIFBsZWFzZSBpbnN0YWxsL2VuYWJsZSBSZWR1eCBkZXZ0b29scyBleHRlbnNpb25cIik7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBsZXQgaXNUaW1lVHJhdmVsaW5nID0gZmFsc2U7XG4gIGNvbnN0IGRldnRvb2xzMiA9IGV4dGVuc2lvbi5jb25uZWN0KHsgbmFtZSwgLi4ucmVzdCB9KTtcbiAgY29uc3QgdW5zdWIxID0gc3Vic2NyaWJlKHByb3h5T2JqZWN0LCAob3BzKSA9PiB7XG4gICAgY29uc3QgYWN0aW9uID0gb3BzLmZpbHRlcigoW18sIHBhdGhdKSA9PiBwYXRoWzBdICE9PSBERVZUT09MUykubWFwKChbb3AsIHBhdGhdKSA9PiBgJHtvcH06JHtwYXRoLm1hcChTdHJpbmcpLmpvaW4oXCIuXCIpfWApLmpvaW4oXCIsIFwiKTtcbiAgICBpZiAoIWFjdGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoaXNUaW1lVHJhdmVsaW5nKSB7XG4gICAgICBpc1RpbWVUcmF2ZWxpbmcgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc25hcFdpdGhvdXREZXZ0b29scyA9IE9iamVjdC5hc3NpZ24oe30sIHNuYXBzaG90KHByb3h5T2JqZWN0KSk7XG4gICAgICBkZWxldGUgc25hcFdpdGhvdXREZXZ0b29sc1tERVZUT09MU107XG4gICAgICBkZXZ0b29sczIuc2VuZChcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6IGFjdGlvbixcbiAgICAgICAgICB1cGRhdGVkQXQ6ICgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkudG9Mb2NhbGVTdHJpbmcoKVxuICAgICAgICB9LFxuICAgICAgICBzbmFwV2l0aG91dERldnRvb2xzXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG4gIGNvbnN0IHVuc3ViMiA9IGRldnRvb2xzMi5zdWJzY3JpYmUoKG1lc3NhZ2UpID0+IHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcbiAgICBpZiAobWVzc2FnZS50eXBlID09PSBcIkFDVElPTlwiICYmIG1lc3NhZ2UucGF5bG9hZCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihwcm94eU9iamVjdCwgSlNPTi5wYXJzZShtZXNzYWdlLnBheWxvYWQpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICBcInBsZWFzZSBkaXNwYXRjaCBhIHNlcmlhbGl6YWJsZSB2YWx1ZSB0aGF0IEpTT04ucGFyc2UoKSBhbmQgcHJveHkoKSBzdXBwb3J0XFxuXCIsXG4gICAgICAgICAgZVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobWVzc2FnZS50eXBlID09PSBcIkRJU1BBVENIXCIgJiYgbWVzc2FnZS5zdGF0ZSkge1xuICAgICAgaWYgKCgoX2EgPSBtZXNzYWdlLnBheWxvYWQpID09IG51bGwgPyB2b2lkIDAgOiBfYS50eXBlKSA9PT0gXCJKVU1QX1RPX0FDVElPTlwiIHx8ICgoX2IgPSBtZXNzYWdlLnBheWxvYWQpID09IG51bGwgPyB2b2lkIDAgOiBfYi50eXBlKSA9PT0gXCJKVU1QX1RPX1NUQVRFXCIpIHtcbiAgICAgICAgaXNUaW1lVHJhdmVsaW5nID0gdHJ1ZTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBKU09OLnBhcnNlKG1lc3NhZ2Uuc3RhdGUpO1xuICAgICAgICBPYmplY3QuYXNzaWduKHByb3h5T2JqZWN0LCBzdGF0ZSk7XG4gICAgICB9XG4gICAgICBwcm94eU9iamVjdFtERVZUT09MU10gPSBtZXNzYWdlO1xuICAgIH0gZWxzZSBpZiAobWVzc2FnZS50eXBlID09PSBcIkRJU1BBVENIXCIgJiYgKChfYyA9IG1lc3NhZ2UucGF5bG9hZCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnR5cGUpID09PSBcIkNPTU1JVFwiKSB7XG4gICAgICBkZXZ0b29sczIuaW5pdChzbmFwc2hvdChwcm94eU9iamVjdCkpO1xuICAgIH0gZWxzZSBpZiAobWVzc2FnZS50eXBlID09PSBcIkRJU1BBVENIXCIgJiYgKChfZCA9IG1lc3NhZ2UucGF5bG9hZCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLnR5cGUpID09PSBcIklNUE9SVF9TVEFURVwiKSB7XG4gICAgICBjb25zdCBhY3Rpb25zID0gKF9lID0gbWVzc2FnZS5wYXlsb2FkLm5leHRMaWZ0ZWRTdGF0ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLmFjdGlvbnNCeUlkO1xuICAgICAgY29uc3QgY29tcHV0ZWRTdGF0ZXMgPSAoKF9mID0gbWVzc2FnZS5wYXlsb2FkLm5leHRMaWZ0ZWRTdGF0ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9mLmNvbXB1dGVkU3RhdGVzKSB8fCBbXTtcbiAgICAgIGlzVGltZVRyYXZlbGluZyA9IHRydWU7XG4gICAgICBjb21wdXRlZFN0YXRlcy5mb3JFYWNoKCh7IHN0YXRlIH0sIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IGFjdGlvbnNbaW5kZXhdIHx8IFwiTm8gYWN0aW9uIGZvdW5kXCI7XG4gICAgICAgIE9iamVjdC5hc3NpZ24ocHJveHlPYmplY3QsIHN0YXRlKTtcbiAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgZGV2dG9vbHMyLmluaXQoc25hcHNob3QocHJveHlPYmplY3QpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZXZ0b29sczIuc2VuZChhY3Rpb24sIHNuYXBzaG90KHByb3h5T2JqZWN0KSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGRldnRvb2xzMi5pbml0KHNuYXBzaG90KHByb3h5T2JqZWN0KSk7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgdW5zdWIxKCk7XG4gICAgdW5zdWIyID09IG51bGwgPyB2b2lkIDAgOiB1bnN1YjIoKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYWRkQ29tcHV0ZWRfREVQUkVDQVRFRChwcm94eU9iamVjdCwgY29tcHV0ZWRGbnNfRkFLRSwgdGFyZ2V0T2JqZWN0ID0gcHJveHlPYmplY3QpIHtcbiAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJhZGRDb21wdXRlZCBpcyBkZXByZWNhdGVkLiBQbGVhc2UgY29uc2lkZXIgdXNpbmcgYGRlcml2ZWAuIEZhbGxpbmcgYmFjayB0byBlbXVsYXRpb24gd2l0aCBkZXJpdmUuIGh0dHBzOi8vZ2l0aHViLmNvbS9wbW5kcnMvdmFsdGlvL3B1bGwvMjAxXCJcbiAgICApO1xuICB9XG4gIGNvbnN0IGRlcml2ZWRGbnMgPSB7fTtcbiAgT2JqZWN0LmtleXMoY29tcHV0ZWRGbnNfRkFLRSkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgZGVyaXZlZEZuc1trZXldID0gKGdldCkgPT4gY29tcHV0ZWRGbnNfRkFLRVtrZXldKGdldChwcm94eU9iamVjdCkpO1xuICB9KTtcbiAgcmV0dXJuIGRlcml2ZShkZXJpdmVkRm5zLCB7IHByb3h5OiB0YXJnZXRPYmplY3QgfSk7XG59XG5cbmZ1bmN0aW9uIHByb3h5V2l0aENvbXB1dGVkX0RFUFJFQ0FURUQoaW5pdGlhbE9iamVjdCwgY29tcHV0ZWRGbnMpIHtcbiAgaWYgKChpbXBvcnQubWV0YS5lbnYgPyBpbXBvcnQubWV0YS5lbnYuTU9ERSA6IHZvaWQgMCkgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgJ3Byb3h5V2l0aENvbXB1dGVkIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSBmb2xsb3cgXCJDb21wdXRlZCBQcm9wZXJ0aWVzXCIgZ3VpZGUgaW4gZG9jcy4nXG4gICAgKTtcbiAgfVxuICBPYmplY3Qua2V5cyhjb21wdXRlZEZucykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaW5pdGlhbE9iamVjdCwga2V5KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwib2JqZWN0IHByb3BlcnR5IGFscmVhZHkgZGVmaW5lZFwiKTtcbiAgICB9XG4gICAgY29uc3QgY29tcHV0ZWRGbiA9IGNvbXB1dGVkRm5zW2tleV07XG4gICAgY29uc3QgeyBnZXQsIHNldCB9ID0gdHlwZW9mIGNvbXB1dGVkRm4gPT09IFwiZnVuY3Rpb25cIiA/IHsgZ2V0OiBjb21wdXRlZEZuIH0gOiBjb21wdXRlZEZuO1xuICAgIGNvbnN0IGRlc2MgPSB7fTtcbiAgICBkZXNjLmdldCA9ICgpID0+IGdldChzbmFwc2hvdChwcm94eU9iamVjdCkpO1xuICAgIGlmIChzZXQpIHtcbiAgICAgIGRlc2Muc2V0ID0gKG5ld1ZhbHVlKSA9PiBzZXQocHJveHlPYmplY3QsIG5ld1ZhbHVlKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGluaXRpYWxPYmplY3QsIGtleSwgZGVzYyk7XG4gIH0pO1xuICBjb25zdCBwcm94eU9iamVjdCA9IHByb3h5KGluaXRpYWxPYmplY3QpO1xuICByZXR1cm4gcHJveHlPYmplY3Q7XG59XG5cbmNvbnN0IGlzT2JqZWN0ID0gKHgpID0+IHR5cGVvZiB4ID09PSBcIm9iamVjdFwiICYmIHggIT09IG51bGw7XG5sZXQgcmVmU2V0O1xuY29uc3QgZGVlcENsb25lID0gKG9iaikgPT4ge1xuICBpZiAoIXJlZlNldCkge1xuICAgIHJlZlNldCA9IHVuc3RhYmxlX2J1aWxkUHJveHlGdW5jdGlvbigpWzJdO1xuICB9XG4gIGlmICghaXNPYmplY3Qob2JqKSB8fCByZWZTZXQuaGFzKG9iaikpIHtcbiAgICByZXR1cm4gb2JqO1xuICB9XG4gIGNvbnN0IGJhc2VPYmplY3QgPSBBcnJheS5pc0FycmF5KG9iaikgPyBbXSA6IE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikpO1xuICBSZWZsZWN0Lm93bktleXMob2JqKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBiYXNlT2JqZWN0W2tleV0gPSBkZWVwQ2xvbmUob2JqW2tleV0pO1xuICB9KTtcbiAgcmV0dXJuIGJhc2VPYmplY3Q7XG59O1xuZnVuY3Rpb24gcHJveHlXaXRoSGlzdG9yeV9ERVBSRUNBVEVEKGluaXRpYWxWYWx1ZSwgc2tpcFN1YnNjcmliZSA9IGZhbHNlKSB7XG4gIGlmICgoaW1wb3J0Lm1ldGEuZW52ID8gaW1wb3J0Lm1ldGEuZW52Lk1PREUgOiB2b2lkIDApICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgICdwcm94eVdpdGhIaXN0b3J5IGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgdGhlIFwidmFsdGlvLWhpc3RvcnlcIiBwYWNrYWdlOyByZWZlciB0byB0aGUgZG9jcydcbiAgICApO1xuICB9XG4gIGNvbnN0IHByb3h5T2JqZWN0ID0gcHJveHkoe1xuICAgIHZhbHVlOiBpbml0aWFsVmFsdWUsXG4gICAgaGlzdG9yeTogcmVmKHtcbiAgICAgIHdpcDogdm9pZCAwLFxuICAgICAgLy8gdG8gYXZvaWQgaW5maW5pdGUgbG9vcFxuICAgICAgc25hcHNob3RzOiBbXSxcbiAgICAgIGluZGV4OiAtMVxuICAgIH0pLFxuICAgIGNsb25lOiBkZWVwQ2xvbmUsXG4gICAgY2FuVW5kbzogKCkgPT4gcHJveHlPYmplY3QuaGlzdG9yeS5pbmRleCA+IDAsXG4gICAgdW5kbzogKCkgPT4ge1xuICAgICAgaWYgKHByb3h5T2JqZWN0LmNhblVuZG8oKSkge1xuICAgICAgICBwcm94eU9iamVjdC52YWx1ZSA9IHByb3h5T2JqZWN0Lmhpc3Rvcnkud2lwID0gcHJveHlPYmplY3QuY2xvbmUoXG4gICAgICAgICAgcHJveHlPYmplY3QuaGlzdG9yeS5zbmFwc2hvdHNbLS1wcm94eU9iamVjdC5oaXN0b3J5LmluZGV4XVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0sXG4gICAgY2FuUmVkbzogKCkgPT4gcHJveHlPYmplY3QuaGlzdG9yeS5pbmRleCA8IHByb3h5T2JqZWN0Lmhpc3Rvcnkuc25hcHNob3RzLmxlbmd0aCAtIDEsXG4gICAgcmVkbzogKCkgPT4ge1xuICAgICAgaWYgKHByb3h5T2JqZWN0LmNhblJlZG8oKSkge1xuICAgICAgICBwcm94eU9iamVjdC52YWx1ZSA9IHByb3h5T2JqZWN0Lmhpc3Rvcnkud2lwID0gcHJveHlPYmplY3QuY2xvbmUoXG4gICAgICAgICAgcHJveHlPYmplY3QuaGlzdG9yeS5zbmFwc2hvdHNbKytwcm94eU9iamVjdC5oaXN0b3J5LmluZGV4XVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2F2ZUhpc3Rvcnk6ICgpID0+IHtcbiAgICAgIHByb3h5T2JqZWN0Lmhpc3Rvcnkuc25hcHNob3RzLnNwbGljZShwcm94eU9iamVjdC5oaXN0b3J5LmluZGV4ICsgMSk7XG4gICAgICBwcm94eU9iamVjdC5oaXN0b3J5LnNuYXBzaG90cy5wdXNoKHNuYXBzaG90KHByb3h5T2JqZWN0KS52YWx1ZSk7XG4gICAgICArK3Byb3h5T2JqZWN0Lmhpc3RvcnkuaW5kZXg7XG4gICAgfSxcbiAgICBzdWJzY3JpYmU6ICgpID0+IHN1YnNjcmliZShwcm94eU9iamVjdCwgKG9wcykgPT4ge1xuICAgICAgaWYgKG9wcy5ldmVyeShcbiAgICAgICAgKG9wKSA9PiBvcFsxXVswXSA9PT0gXCJ2YWx1ZVwiICYmIChvcFswXSAhPT0gXCJzZXRcIiB8fCBvcFsyXSAhPT0gcHJveHlPYmplY3QuaGlzdG9yeS53aXApXG4gICAgICApKSB7XG4gICAgICAgIHByb3h5T2JqZWN0LnNhdmVIaXN0b3J5KCk7XG4gICAgICB9XG4gICAgfSlcbiAgfSk7XG4gIHByb3h5T2JqZWN0LnNhdmVIaXN0b3J5KCk7XG4gIGlmICghc2tpcFN1YnNjcmliZSkge1xuICAgIHByb3h5T2JqZWN0LnN1YnNjcmliZSgpO1xuICB9XG4gIHJldHVybiBwcm94eU9iamVjdDtcbn1cblxuZnVuY3Rpb24gcHJveHlTZXQoaW5pdGlhbFZhbHVlcykge1xuICBjb25zdCBzZXQgPSBwcm94eSh7XG4gICAgZGF0YTogQXJyYXkuZnJvbShuZXcgU2V0KGluaXRpYWxWYWx1ZXMpKSxcbiAgICBoYXModmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGEuaW5kZXhPZih2YWx1ZSkgIT09IC0xO1xuICAgIH0sXG4gICAgYWRkKHZhbHVlKSB7XG4gICAgICBsZXQgaGFzUHJveHkgPSBmYWxzZTtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgaGFzUHJveHkgPSB0aGlzLmRhdGEuaW5kZXhPZihwcm94eSh2YWx1ZSkpICE9PSAtMTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmRhdGEuaW5kZXhPZih2YWx1ZSkgPT09IC0xICYmICFoYXNQcm94eSkge1xuICAgICAgICB0aGlzLmRhdGEucHVzaCh2YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIGRlbGV0ZSh2YWx1ZSkge1xuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmRhdGEuaW5kZXhPZih2YWx1ZSk7XG4gICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZGF0YS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBjbGVhcigpIHtcbiAgICAgIHRoaXMuZGF0YS5zcGxpY2UoMCk7XG4gICAgfSxcbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGEubGVuZ3RoO1xuICAgIH0sXG4gICAgZm9yRWFjaChjYikge1xuICAgICAgdGhpcy5kYXRhLmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICAgIGNiKHZhbHVlLCB2YWx1ZSwgdGhpcyk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldCBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHtcbiAgICAgIHJldHVybiBcIlNldFwiO1xuICAgIH0sXG4gICAgdG9KU09OKCkge1xuICAgICAgcmV0dXJuIG5ldyBTZXQodGhpcy5kYXRhKTtcbiAgICB9LFxuICAgIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YVtTeW1ib2wuaXRlcmF0b3JdKCk7XG4gICAgfSxcbiAgICB2YWx1ZXMoKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhLnZhbHVlcygpO1xuICAgIH0sXG4gICAga2V5cygpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGEudmFsdWVzKCk7XG4gICAgfSxcbiAgICBlbnRyaWVzKCkge1xuICAgICAgcmV0dXJuIG5ldyBTZXQodGhpcy5kYXRhKS5lbnRyaWVzKCk7XG4gICAgfVxuICB9KTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc2V0LCB7XG4gICAgZGF0YToge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2VcbiAgICB9LFxuICAgIHNpemU6IHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlXG4gICAgfSxcbiAgICB0b0pTT046IHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlXG4gICAgfVxuICB9KTtcbiAgT2JqZWN0LnNlYWwoc2V0KTtcbiAgcmV0dXJuIHNldDtcbn1cblxuZnVuY3Rpb24gcHJveHlNYXAoZW50cmllcykge1xuICBjb25zdCBtYXAgPSBwcm94eSh7XG4gICAgZGF0YTogQXJyYXkuZnJvbShlbnRyaWVzIHx8IFtdKSxcbiAgICBoYXMoa2V5KSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhLnNvbWUoKHApID0+IHBbMF0gPT09IGtleSk7XG4gICAgfSxcbiAgICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgICAgY29uc3QgcmVjb3JkID0gdGhpcy5kYXRhLmZpbmQoKHApID0+IHBbMF0gPT09IGtleSk7XG4gICAgICBpZiAocmVjb3JkKSB7XG4gICAgICAgIHJlY29yZFsxXSA9IHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kYXRhLnB1c2goW2tleSwgdmFsdWVdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgZ2V0KGtleSkge1xuICAgICAgdmFyIF9hO1xuICAgICAgcmV0dXJuIChfYSA9IHRoaXMuZGF0YS5maW5kKChwKSA9PiBwWzBdID09PSBrZXkpKSA9PSBudWxsID8gdm9pZCAwIDogX2FbMV07XG4gICAgfSxcbiAgICBkZWxldGUoa2V5KSB7XG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuZGF0YS5maW5kSW5kZXgoKHApID0+IHBbMF0gPT09IGtleSk7XG4gICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZGF0YS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBjbGVhcigpIHtcbiAgICAgIHRoaXMuZGF0YS5zcGxpY2UoMCk7XG4gICAgfSxcbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGEubGVuZ3RoO1xuICAgIH0sXG4gICAgdG9KU09OKCkge1xuICAgICAgcmV0dXJuIG5ldyBNYXAodGhpcy5kYXRhKTtcbiAgICB9LFxuICAgIGZvckVhY2goY2IpIHtcbiAgICAgIHRoaXMuZGF0YS5mb3JFYWNoKChwKSA9PiB7XG4gICAgICAgIGNiKHBbMV0sIHBbMF0sIHRoaXMpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBrZXlzKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YS5tYXAoKHApID0+IHBbMF0pLnZhbHVlcygpO1xuICAgIH0sXG4gICAgdmFsdWVzKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YS5tYXAoKHApID0+IHBbMV0pLnZhbHVlcygpO1xuICAgIH0sXG4gICAgZW50cmllcygpIHtcbiAgICAgIHJldHVybiBuZXcgTWFwKHRoaXMuZGF0YSkuZW50cmllcygpO1xuICAgIH0sXG4gICAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkge1xuICAgICAgcmV0dXJuIFwiTWFwXCI7XG4gICAgfSxcbiAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgIHJldHVybiB0aGlzLmVudHJpZXMoKTtcbiAgICB9XG4gIH0pO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhtYXAsIHtcbiAgICBkYXRhOiB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgIH0sXG4gICAgc2l6ZToge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2VcbiAgICB9LFxuICAgIHRvSlNPTjoge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2VcbiAgICB9XG4gIH0pO1xuICBPYmplY3Quc2VhbChtYXApO1xuICByZXR1cm4gbWFwO1xufVxuXG5leHBvcnQgeyBhZGRDb21wdXRlZF9ERVBSRUNBVEVEIGFzIGFkZENvbXB1dGVkLCBkZXZ0b29scywgcHJveHlNYXAsIHByb3h5U2V0LCBwcm94eVdpdGhDb21wdXRlZF9ERVBSRUNBVEVEIGFzIHByb3h5V2l0aENvbXB1dGVkLCBwcm94eVdpdGhIaXN0b3J5X0RFUFJFQ0FURUQgYXMgcHJveHlXaXRoSGlzdG9yeSwgc3Vic2NyaWJlS2V5LCB3YXRjaCB9O1xuIl0sIm5hbWVzIjpbInN1YnNjcmliZSIsInNuYXBzaG90IiwicHJveHkiLCJyZWYiLCJ1bnN0YWJsZV9idWlsZFByb3h5RnVuY3Rpb24iLCJkZXJpdmUiLCJ1bmRlcml2ZSIsInVuc3RhYmxlX2Rlcml2ZVN1YnNjcmlwdGlvbnMiLCJzdWJzY3JpYmVLZXkiLCJwcm94eU9iamVjdCIsImtleSIsImNhbGxiYWNrIiwibm90aWZ5SW5TeW5jIiwicHJldlZhbHVlIiwibmV4dFZhbHVlIiwiT2JqZWN0IiwiaXMiLCJjdXJyZW50Q2xlYW51cHMiLCJ3YXRjaCIsIm9wdGlvbnMiLCJhbGl2ZSIsImNsZWFudXBzIiwiU2V0Iiwic3Vic2NyaXB0aW9ucyIsIk1hcCIsImNsZWFudXAiLCJmb3JFYWNoIiwiY2xlYW4iLCJjbGVhciIsInVuc3Vic2NyaWJlIiwicmV2YWxpZGF0ZSIsInByb3hpZXNUb1N1YnNjcmliZSIsInBhcmVudCIsInByb21pc2VPclBvc3NpYmxlQ2xlYW51cCIsImFkZCIsImhhcyIsInN5bmMiLCJzZXQiLCJjb3VsZEJlQ2xlYW51cCIsIlByb21pc2UiLCJkZWxldGUiLCJERVZUT09MUyIsIlN5bWJvbCIsImRldnRvb2xzIiwiY29uc29sZSIsIndhcm4iLCJuYW1lIiwiZW5hYmxlZCIsInJlc3QiLCJleHRlbnNpb24iLCJlbnYiLCJNT0RFIiwid2luZG93IiwiX19SRURVWF9ERVZUT09MU19FWFRFTlNJT05fXyIsImUiLCJpc1RpbWVUcmF2ZWxpbmciLCJkZXZ0b29sczIiLCJjb25uZWN0IiwidW5zdWIxIiwib3BzIiwiYWN0aW9uIiwiZmlsdGVyIiwiXyIsInBhdGgiLCJtYXAiLCJvcCIsIlN0cmluZyIsImpvaW4iLCJzbmFwV2l0aG91dERldnRvb2xzIiwiYXNzaWduIiwic2VuZCIsInR5cGUiLCJ1cGRhdGVkQXQiLCJEYXRlIiwidG9Mb2NhbGVTdHJpbmciLCJ1bnN1YjIiLCJtZXNzYWdlIiwiX2EiLCJfYiIsIl9jIiwiX2QiLCJfZSIsIl9mIiwicGF5bG9hZCIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwic3RhdGUiLCJpbml0IiwiYWN0aW9ucyIsIm5leHRMaWZ0ZWRTdGF0ZSIsImFjdGlvbnNCeUlkIiwiY29tcHV0ZWRTdGF0ZXMiLCJpbmRleCIsImFkZENvbXB1dGVkX0RFUFJFQ0FURUQiLCJjb21wdXRlZEZuc19GQUtFIiwidGFyZ2V0T2JqZWN0IiwiZGVyaXZlZEZucyIsImtleXMiLCJnZXQiLCJwcm94eVdpdGhDb21wdXRlZF9ERVBSRUNBVEVEIiwiaW5pdGlhbE9iamVjdCIsImNvbXB1dGVkRm5zIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiRXJyb3IiLCJjb21wdXRlZEZuIiwiZGVzYyIsIm5ld1ZhbHVlIiwiZGVmaW5lUHJvcGVydHkiLCJpc09iamVjdCIsIngiLCJyZWZTZXQiLCJkZWVwQ2xvbmUiLCJvYmoiLCJiYXNlT2JqZWN0IiwiQXJyYXkiLCJpc0FycmF5IiwiY3JlYXRlIiwiZ2V0UHJvdG90eXBlT2YiLCJSZWZsZWN0Iiwib3duS2V5cyIsInByb3h5V2l0aEhpc3RvcnlfREVQUkVDQVRFRCIsImluaXRpYWxWYWx1ZSIsInNraXBTdWJzY3JpYmUiLCJ2YWx1ZSIsImhpc3RvcnkiLCJ3aXAiLCJzbmFwc2hvdHMiLCJjbG9uZSIsImNhblVuZG8iLCJ1bmRvIiwiY2FuUmVkbyIsImxlbmd0aCIsInJlZG8iLCJzYXZlSGlzdG9yeSIsInNwbGljZSIsInB1c2giLCJldmVyeSIsInByb3h5U2V0IiwiaW5pdGlhbFZhbHVlcyIsImRhdGEiLCJmcm9tIiwiaW5kZXhPZiIsImhhc1Byb3h5Iiwic2l6ZSIsImNiIiwidG9TdHJpbmdUYWciLCJ0b0pTT04iLCJpdGVyYXRvciIsInZhbHVlcyIsImVudHJpZXMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZW51bWVyYWJsZSIsInNlYWwiLCJwcm94eU1hcCIsInNvbWUiLCJwIiwicmVjb3JkIiwiZmluZCIsImZpbmRJbmRleCIsImFkZENvbXB1dGVkIiwicHJveHlXaXRoQ29tcHV0ZWQiLCJwcm94eVdpdGhIaXN0b3J5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/valtio/esm/vanilla/utils.mjs\n");

/***/ })

};
;